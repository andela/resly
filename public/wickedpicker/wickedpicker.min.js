!function($,window,document,undefined){"use strict";function Wickedpicker(e,t){this.element=$(e),this.options=$.extend({},defaults,t),this.element.addClass("hasWickedpicker"),this.element.attr("onkeypress","return false;"),this.createPicker(),this.timepicker=$(".wickedpicker"),this.up=$(".wickedpicker__controls__control-up"),this.down=$(".wickedpicker__controls__control-down"),this.hoursElem=$(".wickedpicker__controls__control--hours"),this.minutesElem=$(".wickedpicker__controls__control--minutes"),this.meridiemElem=$(".wickedpicker__controls__control--meridiem"),this.close=$(".wickedpicker__close"),this.selectedHour=this.parseHours(this.options.now.getHours()),this.selectedMin=this.parseMinutes(this.options.now.getMinutes()),this.selectedMeridiem=this.parseMeridiem(this.options.now.getHours()),this.setHoverState(),this.attach(e)}"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return e.length>0&&this.substring(this.length-e.length,this.length)===e});var isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},pluginName="wickedpicker",defaults={now:new Date,twentyFour:!1};$.extend(Wickedpicker.prototype,{showPicker:function(e){var t=$(e.target).offset();if(this.setText(e),this.showHideMeridiemControl(),this.getText(e)!==this.getTime()){var i=this.getText(e).replace(":","").split(" "),s=new Date;s.setHours(i[0]),s.setMinutes(i[2]),this.setTime(s),this.setMeridiem(i[3])}this.timepicker.css({"z-index":this.element.css("z-index")+1,position:"absolute",left:t.left,top:t.top+e.target.offsetHeight+5}).show(),this.handleTimeAdjustments(e)},hideTimepicker:function(e){this.timepicker.hide()},createPicker:function(){0===$(".wickedpicker").length&&$("body").append('<div class="wickedpicker"> <p class="wickedpicker__title">Timepicker <span class="wickedpicker__close"></span> </p> <ul class="wickedpicker__controls"> <li class="wickedpicker__controls__control"> <span class="wickedpicker__controls__control-up"></span><span class="wickedpicker__controls__control--hours">00</span><span class="wickedpicker__controls__control-down"></span> </li><li class="wickedpicker__controls__control--separator"><span class="wickedpicker__controls__control--separator-inner">:</span></li> <li class="wickedpicker__controls__control"> <span class="wickedpicker__controls__control-up"></span><span class="wickedpicker__controls__control--minutes">00</span><span class="wickedpicker__controls__control-down"></span> </li> <li class="wickedpicker__controls__control"> <span class="wickedpicker__controls__control-up"></span><span class="wickedpicker__controls__control--meridiem">AM</span><span class="wickedpicker__controls__control-down"></span> </li> </ul> </div>')},showHideMeridiemControl:function(){this.options.twentyFour===!1?$(".wickedpicker__controls__control--meridiem").parent().show():$(".wickedpicker__controls__control--meridiem").parent().hide()},attach:function(e){$(e).on("click",$.proxy(this.showPicker,this)),$(this.close).on("click",$.proxy(this.hideTimepicker,this))},setTime:function(e){this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setMeridiem()},getTime:function(){return[this.formatTime(this.getHours(),this.getMinutes(),this.getMeridiem())]},setHours:function(e){var t=new Date;t.setHours(e);var i=this.parseHours(t.getHours());this.hoursElem.text(i),this.selectedHour=i},getHours:function(){var e=new Date;return e.setHours(this.hoursElem.text()),e.getHours()},parseHours:function(e){return this.options.twentyFour===!1?(e+11)%12+1:10>e?"0"+e:e},setMinutes:function(e){var t=new Date;t.setMinutes(e);var i=t.getMinutes(),s=this.parseMinutes(i);this.minutesElem.text(s),this.selectedMin=s},getMinutes:function(){var e=new Date;return e.setMinutes(this.minutesElem.text()),e.getMinutes()},parseMinutes:function(e){return(10>e?"0":"")+e},setMeridiem:function(e){var t="";if(e===undefined){var i=this.getMeridiem();t="PM"===i?"AM":"PM"}else t=e;this.meridiemElem.text(t),this.selectedMeridiem=t},getMeridiem:function(){return this.meridiemElem.text()},parseMeridiem:function(e){return e>12?"PM":"AM"},handleTimeAdjustments:function(e){var t=0;$(this.up).add(this.down).off("mousedown click touchstart").on("mousedown click",{Wickedpicker:this,input:e},function(e){var i=this.className.indexOf("up")>-1?"+":"-",s=e.data;"mousedown"==e.type?t=setInterval($.proxy(function(e){e.Wickedpicker.changeValue(i,e.input,this)},this,{Wickedpicker:s.Wickedpicker,input:s.input}),200):s.Wickedpicker.changeValue(i,s.input,this)}).bind("mouseup touchend",function(){clearInterval(t)})},changeValue:function(operator,input,clicked){var target="+"===operator?clicked.nextSibling:clicked.previousSibling,targetClass=$(target).attr("class");targetClass.endsWith("hours")?this.setHours(eval(this.getHours()+operator+1)):targetClass.endsWith("minutes")?this.setMinutes(eval(this.getMinutes()+operator+1)):this.setMeridiem(),this.setText(input)},setText:function(e){$(e.target).val(this.formatTime(this.selectedHour,this.selectedMin,this.selectedMeridiem))},getText:function(e){return $(e.target).val()},formatTime:function(e,t,i){return this.options.twentyFour?e+" : "+t:e+" : "+t+" "+i},setHoverState:function(){isMobile()||$(this.up).add(this.down).add(this.close).hover(function(){$(this).toggleClass("hover-state")})},_time:function(){var e=$(this.element).val();return""===e?this.formatTime(this.selectedHour,this.selectedMin,this.selectedMeridiem):e}}),$.fn[pluginName]=function(e,t){return $.isFunction(Wickedpicker.prototype["_"+e])?$(this).hasClass("hasWickedpicker")?t!==undefined?$.data($(this)[t],"plugin_"+pluginName)["_"+e]():$.data($(this)[0],"plugin_"+pluginName)["_"+e]():void 0:this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Wickedpicker(this,e))})}}(jQuery,window,document);
